(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dashboard"],{1893:function(t,e,a){},"1da1":function(t,e,a){"use strict";function s(t,e,a,s,r,n,i){try{var o=t[n](i),l=o.value}catch(c){return void a(c)}o.done?e(l):Promise.resolve(l).then(s,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,n){var i=t.apply(e,a);function o(t){s(i,r,n,o,l,"next",t)}function l(t){s(i,r,n,o,l,"throw",t)}o(void 0)}))}}a.d(e,"a",(function(){return r}))},"5a26":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-s-tools"}),t._v(" 管理系统 ")]),a("el-breadcrumb-item",[t._v("用户管理")])],1)],1),a("el-card",[a("el-row",{staticClass:"search",attrs:{gutter:20}},[a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"请输入用户名",clearable:""},on:{clear:t.getUserList},model:{value:t.searchUserName,callback:function(e){t.searchUserName=e},expression:"searchUserName"}},[a("el-button",{attrs:{slot:"append",size:"mini"},on:{click:t.FuzzySearvhchUser},slot:"append"},[a("i",{staticClass:"el-icon-search el-icon--right"})])],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加用户")])],1)],1),a("el-table",{attrs:{data:t.userList,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"昵称",prop:"nickname"}}),a("el-table-column",{attrs:{label:"权限",prop:"user_group_name"}}),a("el-table-column",{attrs:{label:"加入时间",prop:"join_datetime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("dateFormat")(e.row.join_datetime))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"上一次登录时间",prop:"last_login_datetime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("dateFormat")(t.isBlank_login(e)))+"\n                ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{effect:"dark",content:"编辑",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.showEditDialog(e.row.username)}}})],1),a("el-tooltip",{attrs:{effect:"dark",content:"删除",placement:"top",enterable:!1}},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.removeUserById(e.row.username)}}})],1)]}}])})],1),a("el-pagination",{attrs:{"current-page":t.queryInfo.page,"page-size":10,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){return t.$set(t.queryInfo,"page",e)},"update:current-page":function(e){return t.$set(t.queryInfo,"page",e)}}})],1),a("el-dialog",{attrs:{title:"添加用户",visible:t.addDialogVisible,width:"30%"},on:{"update:visible":function(e){t.addDialogVisible=e},closed:t.addDialogClosed}},[a("el-form",{ref:"addFormRef",attrs:{model:t.addForm,rules:t.addFormRules,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{model:{value:t.addForm.username,callback:function(e){t.$set(t.addForm,"username",e)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{model:{value:t.addForm.password,callback:function(e){t.$set(t.addForm,"password",e)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[a("el-input",{model:{value:t.addForm.nickname,callback:function(e){t.$set(t.addForm,"nickname",e)},expression:"addForm.nickname"}})],1),a("el-form-item",{attrs:{label:"权限",prop:"user_group"}},[a("el-select",{attrs:{placeholder:"请选择用户权限"},model:{value:t.addForm.user_group,callback:function(e){t.$set(t.addForm,"user_group",e)},expression:"addForm.user_group"}},[a("el-option",{attrs:{label:"普通用户",value:"0"}}),a("el-option",{attrs:{label:"超级管理员",value:"1"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addUser}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑用户信息",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},closed:t.editDialogClosed}},[a("el-form",{ref:"editFormRef",attrs:{model:t.editForm,rules:t.editFormRules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{attrs:{disabled:""},model:{value:t.editForm.username,callback:function(e){t.$set(t.editForm,"username",e)},expression:"editForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"new_password"}},[a("el-input",{model:{value:t.editForm.new_password,callback:function(e){t.$set(t.editForm,"new_password",e)},expression:"editForm.new_password"}})],1),a("el-form-item",{attrs:{label:"用户名称",prop:"new_nickname"}},[a("el-input",{model:{value:t.editForm.new_nickname,callback:function(e){t.$set(t.editForm,"new_nickname",e)},expression:"editForm.new_nickname"}})],1),a("el-form-item",{attrs:{label:"用户权限",prop:"new_user_group"}},[a("el-select",{attrs:{placeholder:"请选择用户权限"},model:{value:t.editForm.new_user_group,callback:function(e){t.$set(t.editForm,"new_user_group",e)},expression:"editForm.new_user_group"}},[a("el-option",{attrs:{label:"普通用户",value:"普通用户"}}),a("el-option",{attrs:{label:"超级管理员",value:"超级管理员"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.editUserInfo}},[t._v("确 定")])],1)],1)],1)},r=[],n=(a("96cf"),a("1da1")),i=a("4328"),o=a.n(i),l={data:function(){return{queryInfo:{page:1},userList:[],total:0,totalPageNum:0,addDialogVisible:!1,addForm:{username:"",password:"",nickname:"",user_group:""},addFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名的长度在3~10个字符之间",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:15,message:"密码的长度在6~15个字符之间",trigger:"blur"}]},editDialogVisible:!1,editForm:{username:"",new_password:"",new_nickname:"",new_user_group:""},editFormRules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:10,message:"用户名的长度在3~10个字符之间",trigger:"blur"}]},searchUserName:"",visibleSubmit:"",userRight:"",colomnHiden:!0,value:"100"}},created:function(){this.getUserList(),this.userRight=this.$store.state.user_group_name,this.colomnHiden="超级管理员"!==this.userRight},methods:{getUserList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("this.$store.getters.tokenInfo:"+this.$store.getters.tokenInfo),console.log('window.sessionStorage.getItem("lidarPlatformToke"):'+window.sessionStorage.getItem("lidarPlatformToken")),t.next=4,this.$http.get("/user/all/admin/search/?page="+this.queryInfo.page);case 4:if(e=t.sent,a=e.data,2e4===a.code){t.next=10;break}return console.log(a.code),console.log(a.msg),t.abrupt("return",this.$message.error("获取用户列表失败！错误原因："+a.msg));case 10:this.userList=a.data.details,this.total=10*a.data.pages;case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),FuzzySearvhchUser:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("this.$store.getters.tokenInfo:"+this.$store.getters.tokenInfo),""!==this.searchUserName){t.next=3;break}return t.abrupt("return",this.$message.error("请输入搜索内容！"));case 3:return t.next=5,this.$http.get("/user/username/admin/search/?username="+this.searchUserName+"&search_type=1");case 5:if(e=t.sent,a=e.data,2e4===a.code){t.next=11;break}return console.log(a.code),console.log(a.msg),t.abrupt("return",this.$message.error("未模糊搜索到该用户！"));case 11:console.log(a),this.userList=a.data.details,this.total=this.userList.length,this.totalPageNum=a.data.pages;case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),PreciseSearchUser:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("this.$store.getters.tokenInfo:"+this.$store.getters.tokenInfo),""!==this.searchUserName){t.next=3;break}return t.abrupt("return",this.$message.error("请输入搜索内容！"));case 3:return t.next=5,this.$http.get("/user/username/admin/search/?username="+this.searchUserName+"&search_type=0");case 5:if(e=t.sent,a=e.data,2e4===a.code){t.next=11;break}return console.log(a.code),console.log(a.msg),t.abrupt("return",this.$message.error("未精确搜索到该用户！"));case 11:console.log(a),this.userList=[],this.userList.push(a.data),this.total=this.userList?this.userList.length:0,this.totalPageNum=a.data.pages;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){console.log("每页 ".concat(t," 条")),this.queryInfo.pagesize=t,this.getUserList()},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.queryInfo.page=t,this.getUserList()},removeUserById:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("username:"+e),t.next=3,this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 3:if(a=t.sent,"confirm"===a){t.next=6;break}return t.abrupt("return",this.$message.info("已取消删除"));case 6:return t.next=8,this.$http.delete("/user/delete/?username="+e);case 8:if(s=t.sent,r=s.data,2e4===r.code){t.next=14;break}return console.log(r.code),console.log(r.msg),t.abrupt("return",this.$message.error("删除用户失败！错误原因："+r.msg));case 14:this.$message.success("删除用户成功！"),this.getUserList();case 16:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),addUser:function(){var t=this;this.$refs.addFormRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("/user/register/",o.a.stringify(t.addForm));case 4:if(s=e.sent,r=s.data,2e4===r.code){e.next=10;break}return console.log(r.code),console.log(r.msg),e.abrupt("return",t.$message.error("添加用户失败！错误原因："+r.msg));case 10:t.$message.success("添加用户成功！"),t.addDialogVisible=!1,t.getUserList();case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addDialogClosed:function(){this.$refs.addFormRef.resetFields()},showEditDialog:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.editForm.username=e,this.editDialogVisible=!0;case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),editDialogClosed:function(){this.$refs.editFormRef.resetFields()},editUserInfo:function(){var t=this;this.$refs.editFormRef.validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(a){var s,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return console.log("this.editForm:"),console.log(t.editForm),s=new FormData,s.append("username",t.editForm.username),t.editForm.new_password&&s.append("new_password",t.editForm.new_password),t.editForm.new_nickname&&s.append("new_nickname",t.editForm.new_nickname),t.editForm.new_user_group&&(console.log("this.editForm.new_user_group:"+t.editForm.new_user_group),r="超级管理员"===t.editForm.new_user_group?1:0,s.append("new_user_group",r)),e.next=11,t.$http({url:"/user/",data:s,method:"put"});case 11:if(n=e.sent,i=n.data,2e4===i.code){e.next=17;break}return console.log(i.code),console.log(i.msg),e.abrupt("return",t.$message.error("修改用户失败！错误原因："+i.msg));case 17:t.$message.success("修改用户成功！"),t.editDialogVisible=!1,t.getUserList();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},isBlank_login:function(t){var e=t.column.property,a=t.row[e],s="从未登录";return(0===a||!1===a||a)&&(s=a),s}}},c=l,u=(a("8457"),a("2877")),d=Object(u["a"])(c,s,r,!1,null,"25adfb1b",null);e["default"]=d.exports},"7ed4":function(t,e,a){"use strict";var s=a("2b0e"),r=new s["default"];e["a"]=r},8457:function(t,e,a){"use strict";a("1893")},ade3:function(t,e,a){"use strict";function s(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,"a",(function(){return s}))},b367:function(t,e,a){!function(e,a){t.exports=a()}(0,(function(){"use strict";function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=window.devicePixelRatio||1,s=10*a,r=s/2;return function(){function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.canvas=function(t){var e=document.getElementById(t),s=e.parentNode.clientWidth,r=e.parentNode.clientHeight;return e.style.width=s+"px",e.style.height=r+"px",e.width=s*a,e.height=r*a,e}(t),this.ctx=this.canvas.getContext("2d"),this.type="bar",this.showValue=!0,this.showGrid=!0,this.topPadding=60*a,this.leftPadding=50*a,this.rightPadding=10*a,this.bottomPadding=50*a,this.yEqual=5,this.yLength=0,this.xLength=0,this.ySpace=0,this.xRorate=0,this.yRorate=0,this.bgColor="#fff",this.axisColor="#666",this.gridColor="#eee",this.title={text:"",color:"#666",position:"top",font:"bold "+18*a+"px Arial",top:s,bottom:r},this.legend={display:!0,position:"top",color:"#666",font:14*a+"px Arial",top:45*a,bottom:15*a,textWidth:0},this.radius=100*a,this.innerRadius=60*a,this.colorList=["#4A90E2","#F5A623","#ff5858","#5e64ff","#2AC766","#743ee2","#b554ff","#199475"],this.init(e)}return function(e,a,s){a&&t(e.prototype,a),s&&t(e,s)}(n,[{key:"init",value:function(t){if(t.title=Object.assign({},this.title,t.title),t.legend=Object.assign({},this.legend,t.legend),Object.assign(this,t),!t.labels||!t.labels.length)throw new Error("缺少主要参数labels");if(!t.datasets||!t.datasets.length)throw new Error("缺少主要参数datasets");this.drawBackground(),"bar"===this.type||"line"===this.type?this.renderBarChart():this.renderPieChart(),this.drawLegend()}},{key:"renderBarChart",value:function(){this.yLength=Math.floor((this.canvas.height-this.topPadding-this.bottomPadding-s)/this.yEqual),this.xLength=Math.floor((this.canvas.width-this.leftPadding-this.rightPadding-s)/this.labels.length),this.ySpace=function(t,a){var s=t.map((function(t){return t.data.reduce((function(t,e){return e<t?t:e}))})),r=Math.ceil(Math.max.apply(Math,e(s))/a),n=r.toString().length-1;return n=2<n?2:n,Math.ceil(r/Math.pow(10,n))*Math.pow(10,n)}(this.datasets,this.yEqual),this.drawXAxis(),this.drawYAxis(),this.drawBarContent()}},{key:"drawBarContent",value:function(){var t=this.ctx,e=this.datasets.length;t.beginPath();for(var n=0;n<e;n++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.datasets[n].label).width),t.fillStyle=t.strokeStyle=this.datasets[n].fillColor||this.colorList[n];for(var i=this.datasets[n].data,o=0;o<i.length;o++)if(!(o>this.labels.length-1)){var l=this.xLength/(e+1),c=this.yLength/this.ySpace,u=this.leftPadding+this.xLength*o+l*(n+.5),d=u+l,h=this.canvas.height-this.bottomPadding,p=h-i[o]*c;if("bar"===this.type)t.fillRect(u,p,d-u,h-p),this.drawValue(i[o],u+l/2,p-r);else if("line"===this.type){var g=this.leftPadding+this.xLength*(o+.5);t.beginPath(),t.arc(g,p,3*a,0,2*Math.PI,!0),t.fill(),0!==o&&(t.beginPath(),t.strokeStyle=this.datasets[n].fillColor||this.colorList[n],t.lineWidth=2*a,t.moveTo(g-this.xLength,h-i[o-1]*c),t.lineTo(g,p),t.stroke(),t.lineWidth=1*a),this.drawValue(i[o],g,p-s)}}}t.stroke()}},{key:"renderPieChart",value:function(){for(var t=this.ctx,e=this.labels.length,a=this.datasets[0],s=a.data,r=s.reduce((function(t,e){return t+e})),n=-Math.PI/2,i=this.canvas.width/2,o=this.canvas.height/2,l=0;l<e;l++){t.font=this.legend.font,this.legend.textWidth+=Math.ceil(t.measureText(this.labels[l]).width),t.beginPath(),t.strokeStyle=t.fillStyle=a.colorList&&a.colorList[l]||this.colorList[l],t.moveTo(i,o);var c=n,u=n+=s[l]/r*2*Math.PI;t.arc(i,o,this.radius,c,u),t.closePath(),t.fill();var d=(c+u)/2;this.drawPieValue(s[l],d)}"ring"===this.type&&(t.beginPath(),t.fillStyle=this.bgColor,t.arc(i,o,this.innerRadius,0,2*Math.PI),t.closePath(),t.fill())}},{key:"drawValue",value:function(t,e,s){var r=this.ctx;this.showValue&&(r.textBaseline="middle",r.font=12*a+"px Arial",r.textAlign="center",r.fillText(t,e,s))}},{key:"drawPieValue",value:function(t,e){var a=this.ctx;if(this.showValue){var r=this.canvas.width/2,n=this.canvas.height/2,i=Math.ceil(Math.abs(this.radius*Math.cos(e))),o=Math.floor(Math.abs(this.radius*Math.sin(e)));a.textBaseline="middle",this.showValue&&(e<=0?(a.textAlign="left",a.moveTo(r+i,n-o),a.lineTo(r+i+s,n-o-s),a.moveTo(r+i+s,n-o-s),a.lineTo(r+i+3*s,n-o-s),a.stroke(),a.fillText(t,r+i+3.5*s,n-o-s)):0<e&&e<=Math.PI/2?(a.textAlign="left",a.moveTo(r+i,n+o),a.lineTo(r+i+s,n+o+s),a.moveTo(r+i+s,n+o+s),a.lineTo(r+i+3*s,n+o+s),a.stroke(),a.fillText(t,r+i+3.5*s,n+o+s)):e>Math.PI/2&&e<Math.PI?(a.textAlign="right",a.moveTo(r-i,n+o),a.lineTo(r-i-s,n+o+s),a.moveTo(r-i-s,n+o+s),a.lineTo(r-i-3*s,n+o+s),a.stroke(),a.fillText(t,r-i-3.5*s,n+o+s)):(a.textAlign="right",a.moveTo(r-i,n-o),a.lineTo(r-i-s,n-o-s),a.moveTo(r-i-s,n-o-s),a.lineTo(r-i-3*s,n-o-s),a.stroke(),a.fillText(t,r-i-3.5*s,n-o-s)))}}},{key:"drawBackground",value:function(){this.ctx.fillStyle=this.bgColor,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawTitle()}},{key:"drawTitle",value:function(){var t=this.title;if(t.text){var e=this.ctx;e.beginPath(),e.font=t.font,e.textAlign="center",e.fillStyle=t.color,"top"===t.position?(e.textBaseline="top",e.fillText(t.text,this.canvas.width/2,t.top)):(e.textBaseline="bottom",e.fillText(t.text,this.canvas.width/2,this.canvas.height-t.bottom))}}},{key:"drawXAxis",value:function(){var t=this.ctx,e=this.canvas.height-this.bottomPadding+.5;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding,e),t.lineTo(this.canvas.width-this.rightPadding,e),t.stroke(),this.drawXPoint()}},{key:"drawXPoint",value:function(){var t=this.ctx;t.beginPath(),t.font=12*a+"px Microsoft YaHei",t.textAlign=this.xRorate?"right":"center",t.textBaseline="top",t.fillStyle=this.axisColor;for(var e=0;e<this.labels.length;e++){var n=this.labels[e],i=this.leftPadding+this.xLength*(e+1)+.5,o=this.canvas.height-this.bottomPadding;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(i,o),t.lineTo(i,this.topPadding+s)):(t.moveTo(i,o),t.lineTo(i,o-r)),t.stroke(),t.save(),t.translate(i-this.xLength/2,o+r),t.rotate(-this.xRorate*Math.PI/180),t.fillText(n,0,0),t.restore()}}},{key:"drawYAxis",value:function(){var t=this.ctx;t.beginPath(),t.strokeStyle=this.axisColor,t.moveTo(this.leftPadding-.5,this.canvas.height-this.bottomPadding+.5),t.lineTo(this.leftPadding-.5,this.topPadding+.5),t.stroke(),this.drawYPoint()}},{key:"drawYPoint",value:function(){var t=this.ctx;t.font=12*a+"px Microsoft YaHei",t.textAlign="right",t.textBaseline="middle",t.beginPath();for(var e=0;e<this.yEqual;e++){var n=this.leftPadding,i=this.canvas.height-this.bottomPadding-this.yLength*(e+1)+.5;this.showGrid?(t.strokeStyle=this.gridColor,t.moveTo(n,i),t.lineTo(this.canvas.width-this.rightPadding-s,i)):(t.strokeStyle=this.axisColor,t.moveTo(n-r,i),t.lineTo(n,i)),t.stroke(),t.save(),t.fillStyle=this.axisColor,t.translate(n-s,i),t.rotate(-this.yRorate*Math.PI/180),t.fillText(this.ySpace*(e+1),0,0),t.restore()}}},{key:"drawLegend",value:function(){var t=this.legend;if(t.display){var e=this.ctx,a="pie"===this.type||"ring"===this.type;e.beginPath(),e.font=t.font,e.textAlign="left",e.textBaseline="middle";for(var n=a?this.labels.length:this.datasets.length,i=(this.canvas.width-(this.legend.textWidth+(5*n-2)*s))/2,o=0,l=0;l<n;l++){var c=a?this.datasets[0]:this.datasets[l],u=(a?this.labels[l]:c.label)||"";e.fillStyle=c.colorList&&c.colorList[l]||c.fillColor||this.colorList[l],"top"===t.position?(this.drawLegendIcon(i+5*s*l+o,t.top-r,2*s,s),e.fillStyle=t.color,e.fillText(u,i+(5*l+3)*s+o,t.top)):"bottom"===t.position?(this.drawLegendIcon(i+5*s*l+o,this.canvas.height-t.bottom-r,2*s,s),e.fillStyle=t.color,e.fillText(u,i+(5*l+3)*s+o,this.canvas.height-t.bottom)):(e.fillRect(s,t.top+2*s*l,2*s,s),e.fillStyle=t.color,e.fillText(u,4*s,t.top+2*s*l+.5*s)),o+=Math.ceil(e.measureText(u).width)}}}},{key:"drawLegendIcon",value:function(t,e,n,i){var o=this.ctx;"line"===this.type?(o.beginPath(),o.strokeStyle=o.fillStyle,o.lineWidth=2*a,o.moveTo(t,e+r),o.lineTo(t+2*s,e+r),o.stroke(),o.lineWidth=1*a,o.arc(t+s,e+r,3*a,0,2*Math.PI,!0),o.fill()):o.fillRect(t,e,n,i)}}]),n}()}))},bfa2:function(t,e,a){},cfd2:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-s-tools"}),t._v(" 管理系统 ")]),a("el-breadcrumb-item",[t._v("系统设置")])],1)],1),a("el-card",[t._v("\n        系统设置\n    ")])],1)},r=[],n={data:function(){return{}},created:function(){},methods:{}},i=n,o=a("2877"),l=Object(o["a"])(i,s,r,!1,null,"5f90233a",null);e["default"]=l.exports},dc1f:function(t,e,a){"use strict";a("bfa2")},e2ad:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:18}},[a("el-row",{staticClass:"mgb20",attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-1"},[a("i",{staticClass:"el-icon-lx-people grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.OnlineUsersNum))]),a("div",[t._v("在线用户")])])])])],1),a("el-col",{attrs:{span:6}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-2"},[a("i",{staticClass:"el-icon-document-copy grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.TextDataNum))]),a("div",[t._v("激光雷达数据生成")])])])])],1),a("el-col",{attrs:{span:6}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-3"},[a("i",{staticClass:"el-icon-orange grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.StructuredDataNum))]),a("div",[t._v("电磁波雷达数据生成")])])])])],1),a("el-col",{attrs:{span:6}},[a("el-card",{attrs:{shadow:"hover","body-style":{padding:"0px"}}},[a("div",{staticClass:"grid-content grid-con-4"},[a("i",{staticClass:"el-icon-picture-outline grid-con-icon"}),a("div",{staticClass:"grid-cont-right"},[a("div",{staticClass:"grid-num"},[t._v(t._s(t.EmergencyDataNum))]),a("div",[t._v("雷达图像数据生成")])])])])],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-card",{staticStyle:{height:"403px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix",staticStyle:{"font-size":"700"},attrs:{slot:"header"},slot:"header"},[a("span",[t._v("快捷方式")])]),a("el-row",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",[a("a",{attrs:{href:"#/dashboard"}},[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-s-home",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("主页")])])],1)])]),a("el-col",{attrs:{span:6}},[a("div",[a("a",{attrs:{href:"#/Lidar_Input_Data"}},[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-s-marketing",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("数据可视化")])])],1)])]),a("el-col",{attrs:{span:6}},[a("div",[a("a",{attrs:{href:"#/Lidar_Augmentation_Add"}},[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-data-analysis",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("添加数据生成")])])],1)])]),a("el-col",{attrs:{span:6}},[a("div",[a("a",{attrs:{href:"#/Log"}},[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-s-claim",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("日志管理")])])],1)])])],1),a("el-row",{staticStyle:{"margin-left":"10px","margin-right":"10px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("div",[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-s-data",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("进度条")])])],1)]),a("el-col",{attrs:{span:6}},[a("div",[a("a",{attrs:{href:"#/augmentation_manage"}},[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-set-up",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("生成管理")])])],1)])]),a("el-col",{attrs:{span:6}},[a("div",[a("a",{attrs:{href:"#/user_manage"}},[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-user",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("用户管理")])])],1)])]),a("el-col",{attrs:{span:6}},[a("div",[a("a",{attrs:{href:"#/system_setting"}},[a("el-button",{staticStyle:{"font-size":"35px",width:"100%",height:"125px"},attrs:{type:"info",icon:"el-icon-setting",plain:""}},[a("br"),a("span",{staticStyle:{"font-size":"14px"}},[t._v("系统设置")])])],1)])])],1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-card",{staticStyle:{height:"403px"},attrs:{shadow:"hover"}},[a("div",{staticClass:"clearfix .body3",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("正在运行的各生成任务")])]),a("el-table",{staticStyle:{width:"100%","margin-top":"-20px","font-size":"15px"},attrs:{data:t.RunningTask_final,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"方法名",width:"200"}}),a("el-table-column",{attrs:{prop:"num",label:"数量",width:"73"}})],1)],1)],1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-card",{staticClass:"mgb20",staticStyle:{height:"155px"},attrs:{shadow:"hover"}},[a("div",{staticStyle:{margin:"0 auto",width:"100%","box-shadow":"rgba(0, 0, 0, 0.12) 0px 2px 4px,"}},[a("el-table",{staticStyle:{width:"100%",margin:"0 auto","font-size":"13px"},attrs:{data:t.tableData,"show-header":!1}},[a("el-table-column",{staticStyle:{"font-weight":"700"},attrs:{prop:"key",width:"70"}}),a("el-table-column",{attrs:{prop:"value",width:"203"}})],1),a("el-table",{staticStyle:{width:"100%",margin:"0 auto","font-size":"13px"},attrs:{data:t.tableButtonData,"show-header":!1}},[a("el-table-column",{attrs:{prop:"action",width:"80"}}),a("el-table-column",[[a("el-button",{attrs:{size:"mini",type:"success",plain:""}},[t._v("获取授权")]),a("el-button",{attrs:{size:"mini",type:"warning",plain:""}},[t._v("慕测官网")])]],2)],1)],1)]),a("el-card",{staticStyle:{height:"142px","margin-bottom":"20px"},attrs:{shadow:"hover","body-style":"el-card__body1"}},[a("div",{staticClass:"el-card__header1"},[a("span",[t._v("数据生成报告")])]),t._v("\n                转化率 "),a("el-progress",{attrs:{percentage:t.ConversionRate}}),t._v("\n                合格率\n                "),a("el-progress",{attrs:{percentage:t.PassRate}})],1),a("el-card",{staticStyle:{height:"182px"},attrs:{shadow:"hover","body-style":"el-card__body1 el-card__body2"}},[a("div",{staticClass:"el-card__header1"},[a("span",[t._v("系统报告")])]),t._v("\n                CPU使用率 "),a("el-progress",{attrs:{percentage:t.systemStatusData.CPUStatus,color:"#42b983"}}),t._v("\n                GPU使用率\n                "),a("el-progress",{attrs:{percentage:t.systemStatusData.GPUStatus,color:"#f1e05a"}}),t._v("\n                内存占用率 "),a("el-progress",{attrs:{percentage:t.systemStatusData.memoryStatus}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{staticStyle:{"padding-left":"25px"},attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticStyle:{width:"600px",height:"300px",margin:"0 auto"},attrs:{id:"main"}})])],1),a("el-col",{attrs:{span:12}},[a("el-card",{attrs:{shadow:"hover"}},[a("schart",{ref:"line",staticClass:"schart",attrs:{canvasId:"line",options:t.options2}})],1)],1)],1)],1)},r=[];a("8615"),a("456d"),a("ac6a");function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}a("96cf");var i=a("1da1"),o=(a("7f7f"),a("f5ac")),l=(a("7ed4"),a("63e3")),c={name:"dashboard",data:function(){return{tableData:[{key:"平台名",value:"智能系统软件测试数据生成平台"},{key:"版本号",value:"Ver1.0"}],tableButtonData:[{action:"获取设置"}],name:sessionStorage.getItem("ms_username"),data:[{name:"2018/09/04",value:1083},{name:"2018/09/05",value:941},{name:"2018/09/06",value:1139},{name:"2018/09/07",value:816},{name:"2018/09/08",value:327},{name:"2018/09/09",value:228},{name:"2018/09/10",value:1065}],options2:{type:"line",title:{text:"近几个月各类数据生成趋势图"},labels:["6月","7月","8月","9月","10月"],datasets:[{label:"激光雷达数据生成",data:[234,278,270,190,230]},{label:"电磁波雷达数据生成",data:[164,178,150,135,160]},{label:"紧急数据生成",data:[74,118,200,235,90]}]},systemStatusData:{CPUStatus:0,GPUStatus:0,memoryStatus:0},StructuredDataNum:-1,TextDataNum:-1,EmergencyDataNum:-1,OnlineUsersNum:0,ConversionRate:0,PassRate:0,RunningTask:{},RunningTask_name:[],RunningTask_num:[],RunningTask_final:[]}},components:{Schart:o["a"]},computed:{role:function(){return"admin"===this.name?"超级管理员":"普通用户"}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.getPerformance(),this.getOnlineUser(),this.getRunningTask(),console.log("this.$store.state.nickname:"+this.$store.state.nickname),e=this,this.timer=setInterval((function(){e.date=new Date}),1e3),a=l["init"](document.getElementById("main")),s={title:{text:"生成数据监控",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["1型数据生成","2型数据生成","3型数据生成","4型数据生成","5型数据生成"],top:"8%"},toolbox:{feature:{saveAsImage:{}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!0,data:["周一","周二","周三","周四","周五","周六","周日"]}],yAxis:[{type:"value"}],series:[{name:"1型数据生成",type:"line",stack:"总量",areaStyle:{},data:[120,132,101,134,90,230,210]},{name:"2型数据生成",type:"line",stack:"总量",areaStyle:{},data:[220,182,191,234,290,330,310]},{name:"3型数据生成",type:"line",stack:"总量",areaStyle:{},data:[150,232,201,154,190,330,410]},{name:"4型数据生成",type:"line",stack:"总量",areaStyle:{},data:[320,332,301,334,390,330,320]},{name:"5型数据生成",type:"line",stack:"总量",label:{},areaStyle:{},data:[820,932,901,934,1290,1330,1320]}]},s&&"object"===n(s)&&a.setOption(s,!0),t.next=11,this.$http.get("/user/");case 11:r=t.sent,i=r.data,console.log("user:"),console.log(i);case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{changeDate:function(){var t=(new Date).getTime();this.data.forEach((function(e,a){var s=new Date(t-864e5*(6-a));e.name="".concat(s.getFullYear(),"/").concat(s.getMonth()+1,"/").concat(s.getDate())}))},getPerformance:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("sessionStorageToken:"+window.sessionStorage.getItem("token")),t.next=3,this.$http.get("/system_status/performance/");case 3:if(e=t.sent,a=e.data,2e4===a.code){t.next=8;break}return console.log(a.code),t.abrupt("return",this.$message.error("获取当前系统性能失败！"));case 8:this.systemStatusData.CPUStatus=parseInt(a.data.cpu),this.systemStatusData.memoryStatus=parseInt(a.data.memory),console.log("当前系统性能:",a.data);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getOnlineUser:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/system_status/online_user/");case 2:if(e=t.sent,a=e.data,2e4===a.code){t.next=7;break}return console.log(a.code),t.abrupt("return",this.$message.error("获取在线人数失败！"));case 7:this.OnlineUsersNum=a.data.online_user,console.log("当前在线人数:",a.data);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getRunningTask:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.get("/system_status/running_task/");case 2:if(e=t.sent,a=e.data,2e4===a.code){t.next=6;break}return t.abrupt("return",this.$message.error("获取正在运行各生成任务失败！"));case 6:for(console.log("当前正在运行各生成任务:",a.data),this.RunningTask=a.data,this.RunningTask_name=Object.keys(this.RunningTask),this.RunningTask_num=Object.values(this.RunningTask),this.RunningTask_final=[],s=0;s<this.RunningTask_name.length;s++)r={},r.name=this.RunningTask_name[s],r.num=this.RunningTask_num[s],this.RunningTask_final.push(r);case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},u=c,d=(a("dc1f"),a("2877")),h=Object(d["a"])(u,s,r,!1,null,"c2fa085a",null);e["default"]=h.exports},f5ac:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("canvas",{attrs:{id:t.canvasId}})])},r=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),i=a("b367"),o=a.n(i);function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var u={props:{canvasId:{type:String,default:"",required:!0},options:{type:Object,required:!0}},mounted:function(){this.renderChart()},methods:{renderChart:function(){if(this.checkOptions()){var t=c({},this.options);new o.a(this.canvasId,t)}},checkOptions:function(){var t=this.options;return!(!t.datasets||!t.datasets.length)&&!(!t.labels||!t.labels.length)}},watch:{options:{handler:function(t,e){this.renderChart()},deep:!0}}},d=u,h=a("2877"),p=Object(h["a"])(d,s,r,!1,null,null,null);e["a"]=p.exports}}]);